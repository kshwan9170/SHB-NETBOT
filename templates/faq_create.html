<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHB-NetBot - FAQ 작성</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 고정 내비게이션 바 -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/shinhan_logo_refined.svg') }}" alt="신한은행 로고">
                <span>SHB-NetBot</span>
            </div>
            <div class="nav-links">
                <a href="/#home" class="nav-link">Home</a>
                <a href="/#about" class="nav-link">About</a>
                <a href="/#chat" class="nav-link">Chat</a>
                <a href="/#documents" class="nav-link">Documents</a>
                <a href="/#support" class="nav-link active">Support</a>
                <button id="theme-toggle" class="theme-toggle">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
            <div class="mobile-menu-btn">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
    </nav>

<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-12">
            <h2><i class="fas fa-plus-circle"></i> FAQ 작성</h2>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('index') }}">홈</a></li>
                    <li class="breadcrumb-item"><a href="{{ url_for('faq_list', admin=1) }}">FAQ</a></li>
                    <li class="breadcrumb-item active" aria-current="page">새 FAQ 작성</li>
                </ol>
            </nav>
        </div>
    </div>

    {% if error %}
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-circle"></i> {{ error }}
            </div>
        </div>
    </div>
    {% endif %}

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">FAQ 정보 입력</h5>
                </div>
                <div class="card-body">
                    <form action="{{ url_for('faq_create') }}" method="POST">
                        <div class="form-group">
                            <label for="question">질문 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="question" name="question" required>
                            <small class="form-text text-muted">
                                사용자가 자주 묻는 질문을 입력하세요. 질문은 명확하고 이해하기 쉽게 작성해주세요.
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="answer">답변 <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="answer" name="answer" rows="6" required></textarea>
                            <small class="form-text text-muted">
                                질문에 대한 답변을 상세하게 입력하세요. HTML 태그 사용이 가능합니다.
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="category">카테고리 <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="category" name="category" list="categoryList" required>
                                <datalist id="categoryList">
                                    {% for category in categories %}
                                    <option value="{{ category }}">
                                    {% endfor %}
                                </datalist>
                            </div>
                            <small class="form-text text-muted">
                                기존 카테고리 중 선택하거나 새 카테고리를 입력하세요.
                            </small>
                        </div>
                        
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="is_published" name="is_published" checked>
                            <label class="form-check-label" for="is_published">공개</label>
                            <small class="form-text text-muted">
                                체크하면 FAQ가 사용자에게 표시됩니다. 체크하지 않으면 관리자만 볼 수 있습니다.
                            </small>
                        </div>
                        
                        <div class="form-group text-right">
                            <a href="{{ url_for('faq_list', admin=1) }}" class="btn btn-secondary mr-2">취소</a>
                            <button type="submit" class="btn btn-primary">저장</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 푸터 -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h4>SHB-NetBot</h4>
                <p>신한은행 네트워크 지원 챗봇 서비스</p>
            </div>
            <div class="footer-section">
                <h4>바로가기</h4>
                <ul>
                    <li><a href="/#home">홈</a></li>
                    <li><a href="/#chat">챗봇</a></li>
                    <li><a href="/#documents">문서관리</a></li>
                    <li><a href="/#support">고객지원</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>문의하기</h4>
                <ul>
                    <li><a href="/inquiry">문의 게시판</a></li>
                    <li><a href="/feedback">피드백</a></li>
                    <li><a href="/report">장애 신고</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 SHB-NetBot. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- jQuery, Bootstrap 및 AOS 스크립트 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
<script src="{{ url_for('static', filename='js/modern.js') }}"></script>

<script>
    AOS.init({
        duration: 800,
        once: true
    });
    
    $(document).ready(function() {
        // 마크다운 미리보기 기능
        var markdownConverter = new showdown.Converter();
        
        $('#answer').on('input', function() {
            var markdownText = $(this).val();
            var htmlContent = markdownConverter.makeHtml(markdownText);
            $('#answer-preview').html(htmlContent);
        });
        
        // 탭 전환
        $('#preview-tab').click(function(e) {
            e.preventDefault();
            $(this).tab('show');
            
            // 미리보기 업데이트
            var markdownText = $('#answer').val();
            var htmlContent = markdownConverter.makeHtml(markdownText);
            $('#answer-preview').html(htmlContent);
        });
        
        $('#edit-tab').click(function(e) {
            e.preventDefault();
            $(this).tab('show');
        });
    });
</script>
</body>
</html>